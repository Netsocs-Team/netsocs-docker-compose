# =============================================================================
# NETSOCS DOCKER COMPOSE ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and update the values according to your environment
# cp env.example .env

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MySQL Database
DB_HOST=localhost
DB_PORT=3306
DB_NAME=netsocs
DB_USER=netsocs
DB_PASS=password
DB_ROOT_PASSWORD=rootpassword

# MongoDB
MONGO_URI=mongodb://netsocs-mongodb:27017/netsocs
MONGO_DATABASE=netsocs
MONGO_ROOT_USER=root
MONGO_ROOT_PASSWORD=password

# Redis
REDIS_HOST=netsocs-redis-service
REDIS_PORT=6379
REDIS_PASS=password

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# HTTP Hostname (for Keycloak and Traefik)
HTTP_HOSTNAME=localhost

# MediaMTX Configuration
MEDIAMTX_HOSTNAME=localhost

# =============================================================================
# KEYCLOAK CONFIGURATION (for Traefik middlewares)
# =============================================================================

# Keycloak Client Configuration
KEYCLOAK_CLIENT_ID=netsocs-kc
KEYCLOAK_CLIENT_SECRET=wfwJZ6zkdKJtkA5vowBUemEcCFA98QkO
KEYCLOAK_REALM=netsocs

# Keycloak Admin
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123

# Security Settings
SKIP_INSECURE=true

# =============================================================================
# CADDY CONFIGURATION (Main Reverse Proxy)
# =============================================================================

# Caddy Email for Let's Encrypt notifications
CADDY_EMAIL=admin@netsocs.com

# Domain Configuration
MAIN_DOMAIN=your-domain.com
LOCAL_DOMAIN=localhost

# Caddy Storage (for certificates and config)
CADDY_DATA_PATH=./caddy/data
CADDY_CONFIG_PATH=./caddy/config

# =============================================================================
# TRAEFIK CONFIGURATION (Internal Reverse Proxy)
# =============================================================================

# Traefik Dashboard Access (internal)
TRAEFIK_DASHBOARD_HOST=traefik.localhost

# Domain Configuration (for service routing)
DASHBOARD_DOMAIN=dashboard.localhost
API_DOMAIN=api.localhost
AUTH_DOMAIN=auth.localhost
CONFIG_DOMAIN=config.localhost

# =============================================================================
# SERVICE PORTS (if you need to change default ports)
# =============================================================================

# Keycloak
KEYCLOAK_HTTP_PORT=8080
KEYCLOAK_HTTPS_PORT=8443

# Traefik (internal)
TRAEFIK_INTERNAL_PORT=8080
TRAEFIK_INTERNAL_HTTPS_PORT=8443

# =============================================================================
# MAIL CONFIGURATION (for access_control_backend)
# =============================================================================

# Mail Server Settings
MAIL_HOST=gator2120.hostgator.com
MAIL_PORT=465
MAIL_USERNAME=teresa.carreno@netsocs.com
MAIL_PASSWORD=p4ssword

# =============================================================================
# SERVICE URLs (internal communication)
# =============================================================================

# These are typically internal Docker network URLs
# Only change if you modify the service names or ports
DRIVERHUB_URL=http://netsocs-driverhub-service:3196
CONFIG_MODULE_API_V2_URL=http://netsocs-modules-configuration-backendv2-service:3091/api/v2
DRIVERHUB_API_URL=http://netsocs-driverhub-service:3196

# =============================================================================
# ARCHITECTURE NOTES
# =============================================================================
# 
# Traffic Flow:
# Internet → Caddy (Ports 80/443) → Traefik (Port 8080) → Services
# 
# Caddy handles:
# - TLS termination and certificate management
# - HTTP to HTTPS redirects
# - Basic load balancing
# - Edge security
# 
# Traefik handles:
# - Service discovery and routing
# - Authentication middleware
# - API path rewriting
# - Service-specific configurations
#
# =============================================================================
# NOTES
# =============================================================================
# 
# 1. Database credentials should be strong and unique in production
# 2. Redis password should be a strong, random string
# 3. Mail credentials should be kept secure
# 4. Service URLs are for internal Docker network communication
# 5. Hostnames should match your actual domain in production
# 6. Consider using Docker secrets for sensitive data in production
# 7. Caddy domains can be configured for local development or production
# 8. For production, update MAIN_DOMAIN in Caddyfile and .env
# 9. Keycloak client secret should be kept secure and rotated regularly
# 10. SKIP_INSECURE should be false in production environments
# 11. Caddy automatically handles Let's Encrypt certificates
# 12. Traefik runs internally and is not exposed to the internet
#
# ============================================================================= 